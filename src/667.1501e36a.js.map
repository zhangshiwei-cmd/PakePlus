{"version":3,"file":"js/667.1501e36a.js","mappings":"sPACA,MAAMA,EAAa,CACjBC,MAAO,iBAEHC,EAAa,CACjBD,MAAO,aAEHE,EAAa,CACjBF,MAAO,gBAEHG,EAAa,CAAC,WACdC,EAAa,CACjBJ,MAAO,YAEHK,EAAa,CACjBL,MAAO,cAEHM,EAAa,CACjBN,MAAO,aAEHO,EAAa,CAAC,WACdC,EAAa,CAAC,OAOpB,OACEC,OAAQ,aACR,KAAAC,CAAMC,GACJ,MAAMC,GAAS,UACTC,GAAQ,UAGRC,GAAc,QAAI,MAClBC,GAAQ,UACRC,GAAS,QAAO,UAGhBC,GAAc,QAAI,IAClBC,GAAY,QAAI,IAGhBC,EAAgBC,MAAOC,EAAKC,KAEhCC,aAAaC,QAAQ,iBAAkBF,GACvCN,EAAOS,KAAKJ,EAAKH,EAAUQ,MAAM,EAI7BC,EAAeP,UACnB,IACE,MAAMQ,QAAY,OAAgB,CAChCC,QAASd,EAAMe,MAAMC,aAEvBb,EAAUQ,MAAQE,EAAII,KAAKV,KAE3BL,EAAYS,MAAQ,CAACE,EAAII,MACzB,MAAMC,QAAkB,QAAS,CAC/Bf,UAAWH,EAAMe,MAAMC,aAErBE,EAAUD,KAAKE,SACjBC,EAAOT,OAAQ,EAEfS,EAAOT,OAAQ,CAEnB,CAAE,MAAOU,GACPC,QAAQC,IAAIF,GACZtB,EAAYY,OAAOa,UAAU,WAAY,IAC3C,GAEFZ,IAGA,MAAMQ,GAAS,SAAI,GACbK,EAAWpB,UACVe,EAAOT,YAGJb,EAAM4B,SAAS,kBAAmBnB,SAFlCT,EAAM4B,SAAS,eAAgBnB,GAIvCa,EAAOT,OAASS,EAAOT,KAAK,EAIxBgB,EAAY,KAChB9B,EAAO+B,MAAM,EAEf,MAAO,CAACC,EAAMC,MACL,WAAc,QAAoB,MAAO9C,EAAY,EAAC,QAAoB,MAAO,CACtFC,MAAO,MACP8C,QAASJ,IACR,QAAiB,OAAO,QAAoB,MAAOzC,EAAY,EAAC,QAAoB,MAAOC,EAAY,EAAC,QAAoB,KAAM,KAAM,CAAC2C,EAAO,KAAOA,EAAO,IAAK,QAAoB,IAAK,CAC7L7C,MAAO,eACN,UAAW,MAAM,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAYiB,EAAYS,OAAO,CAACqB,EAAMC,MACxG,WAAc,QAAoB,KAAM,CAC7CC,IAAKD,EACLF,QAASI,GAAU/B,EAAc4B,EAAK1B,IAAK0B,EAAKzB,OAC/C,EAAC,QAAoB,MAAOlB,EAAY,EAAC,QAAoB,MAAOC,GAAY,QAAiB0C,EAAKzB,MAAO,IAAI,QAAoB,MAAOhB,GAAY,QAAiB,MAAMyC,EAAKI,UAAW,MAAM,QAAoB,MAAO,CACjOnD,MAAO,OACP8C,SAAS,SAAeI,GAAUV,EAASO,EAAKzB,OAAO,CAAC,UACvD,EAAC,QAAoB,MAAO,CAC7B8B,IAAKjB,EAAOT,MAAQ,EAAQ,MAA6B,EAAQ,MACjE2B,IAAK,IACJ,KAAM,EAAG7C,IAAc,EAAGD,IAAc,EAAGJ,MAC5C,aAAa,QAAamD,EAAA,EAAW,CACvCC,QAAS,cACTC,IAAK1C,GACJ,KAAM,OAEb,G,UCzGF,MAAM2C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://myhouse/./src/views/Search/searchpage.vue","webpack://myhouse/./src/views/Search/searchpage.vue?8be2"],"sourcesContent":["import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"category_main\"\n};\nconst _hoisted_2 = {\n  class: \"musiclist\"\n};\nconst _hoisted_3 = {\n  class: \"musiclistout\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  class: \"musicbox\"\n};\nconst _hoisted_6 = {\n  class: \"music_name\"\n};\nconst _hoisted_7 = {\n  class: \"music_aut\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"src\"];\nimport { ref, onMounted, inject } from \"vue\";\nimport { getmusicpalyer2 } from \"@/api/music/musicplayer\";\nimport { addlove, deletelove, isloveok } from \"@/api/music/mylove\";\nimport { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport alertshow from \"@/components/alertshow.vue\";\nexport default {\n  __name: 'searchpage',\n  setup(__props) {\n    const router = useRouter();\n    const store = useStore();\n\n    // 提示框\n    const alertstitle = ref(null);\n    const route = useRoute();\n    const player = inject(\"player\");\n\n    // 获取到的音乐\n    const searchMusic = ref([]);\n    const musicname = ref(\"\");\n\n    // 点击播放音乐\n    const musicPlayergo = async (url, name) => {\n      // 进行本地存储name\n      localStorage.setItem(\"musicnamefirst\", name);\n      player.play(url, musicname.value);\n    };\n\n    // 查找音乐\n    const searchMusic2 = async () => {\n      try {\n        const res = await getmusicpalyer2({\n          musicid: route.query.searchText\n        });\n        musicname.value = res.data.name;\n        // console.log(res, \"123123\");\n        searchMusic.value = [res.data];\n        const isloveoka = await isloveok({\n          musicname: route.query.searchText\n        });\n        if (isloveoka.data.ischange) {\n          islove.value = true;\n        } else {\n          islove.value = false;\n        }\n      } catch (error) {\n        console.log(error);\n        alertstitle.value?.showAlert(\"搜索出错，请重试\", 500);\n      }\n    };\n    searchMusic2();\n\n    // 添加我喜欢的\n    const islove = ref(false);\n    const addmusic = async name => {\n      if (!islove.value) {\n        await store.dispatch(\"love/addLove\", name);\n      } else {\n        await store.dispatch(\"love/removeLove\", name);\n      }\n      islove.value = !islove.value;\n    };\n\n    // 返回上上一页\n    const blackpage = () => {\n      router.back();\n    };\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n        class: \"top\",\n        onClick: blackpage\n      }, _toDisplayString(\"←\")), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"ul\", null, [_cache[0] || (_cache[0] = _createElementVNode(\"p\", {\n        class: \"title_music\"\n      }, \"搜索到的音乐\", -1)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(searchMusic.value, (item, index) => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          key: index,\n          onClick: $event => musicPlayergo(item.url, item.name)\n        }, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, _toDisplayString(item.name), 1), _createElementVNode(\"div\", _hoisted_7, _toDisplayString(`作者：${item.author}`), 1)]), _createElementVNode(\"div\", {\n          class: \"love\",\n          onClick: _withModifiers($event => addmusic(item.name), [\"stop\"])\n        }, [_createElementVNode(\"img\", {\n          src: islove.value ? require('@/assets/images/爱心红.png') : require('@/assets/images/爱心黑.png'),\n          alt: \"\"\n        }, null, 8, _hoisted_9)], 8, _hoisted_8)], 8, _hoisted_4);\n      }), 128))])])]), _createVNode(alertshow, {\n        ref_key: \"alertstitle\",\n        ref: alertstitle\n      }, null, 512)]);\n    };\n  }\n};","/* unplugin-vue-components disabled */import script from \"./searchpage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./searchpage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./searchpage.vue?vue&type=style&index=0&id=5263f27f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_dc6768a52f0b836efcefe3433fba603d/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5263f27f\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","__name","setup","__props","router","store","alertstitle","route","player","searchMusic","musicname","musicPlayergo","async","url","name","localStorage","setItem","play","value","searchMusic2","res","musicid","query","searchText","data","isloveoka","ischange","islove","error","console","log","showAlert","addmusic","dispatch","blackpage","back","_ctx","_cache","onClick","item","index","key","$event","author","src","alt","alertshow","ref_key","ref","__exports__"],"sourceRoot":""}