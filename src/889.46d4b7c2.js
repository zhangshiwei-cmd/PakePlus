"use strict";(self["webpackChunkmyhouse"]=self["webpackChunkmyhouse"]||[]).push([[889],{9889:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});var s=a(337),u=a(7476),n=a(5250),t=a(265),o=a(6576),i=a(8370);const d=e=>i.A.post("/update/updateinfo",e),r=e=>i.A.post("/update/updatepwd",e),c={class:"updatemain"},k={class:"main"},v={class:"form-group"},p={class:"form-group"},m={class:"form-group"},L={class:"form-group"};var b={__name:"updatepage",props:{userlist:{type:Object,required:!0,default:()=>({})}},emits:["closebtn"],setup(e,{emit:l}){const a=(0,s.WQ)("reloadUserInfo"),u=l,o=e,i=(0,t.KR)({nickname:o.userlist.nickname,email:o.userlist.email,qqnum:o.userlist.qqnum,sex:o.userlist.sex.toString()}),r=()=>{u("closebtn")},b=async()=>{alert("修改成功");await d(i.value);a&&a(),r()};return(e,l)=>((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",k,[l[11]||(l[11]=(0,s.Lk)("div",{class:"title"},"修改个人信息",-1)),(0,s.Lk)("div",{class:"offbtn",onClick:r},"×"),(0,s.Lk)("form",{class:"update-form",onSubmit:(0,n.D$)(b,["prevent"])},[l[9]||(l[9]=(0,s.Lk)("div",{class:"ding"},"⊕",-1)),(0,s.Lk)("div",v,[l[4]||(l[4]=(0,s.Lk)("label",{for:"nickname"},"昵称:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"nickname","onUpdate:modelValue":l[0]||(l[0]=e=>i.value.nickname=e),required:"required"},null,512),[[n.Jo,i.value.nickname]])]),(0,s.Lk)("div",p,[l[5]||(l[5]=(0,s.Lk)("label",{for:"qq"},"QQ:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"qq","onUpdate:modelValue":l[1]||(l[1]=e=>i.value.qqnum=e),required:"required"},null,512),[[n.Jo,i.value.qqnum]])]),(0,s.Lk)("div",m,[l[6]||(l[6]=(0,s.Lk)("label",{for:"email"},"邮箱:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":l[2]||(l[2]=e=>i.value.email=e),required:"required"},null,512),[[n.Jo,i.value.email]])]),(0,s.Lk)("div",L,[l[8]||(l[8]=(0,s.Lk)("label",{for:"gender"},"性别:",-1)),(0,s.bo)((0,s.Lk)("select",{id:"gender","onUpdate:modelValue":l[3]||(l[3]=e=>i.value.sex=e)},l[7]||(l[7]=[(0,s.Lk)("option",{value:"0"},"男",-1),(0,s.Lk)("option",{value:"1"},"女",-1)]),512),[[n.u1,i.value.sex]])]),l[10]||(l[10]=(0,s.Lk)("button",{type:"submit",class:"submit-btn"},"提交修改",-1))],32)])]))}},f=a(6838);const q=(0,f.A)(b,[["__scopeId","data-v-7fb2ea9c"]]);var g=q,y=a(7636),w=a(3977);const C={class:"updatemain"},_={class:"main"},x={class:"contextbox"},h={key:0,class:"setbox"},K={class:"formbox"},R={class:"oldpwd"},E={for:"oldpassword"},U={class:"newpwd"},X={for:"newpassword"},A={key:1,class:"setbox"},V={key:2,class:"setbox"};var Q={__name:"Dialog",props:{type:{type:Object,required:!0,default:()=>({})}},emits:["closedig"],setup(e,{emit:l}){const a=(0,w.Pj)(),u=l,o=e,i=()=>{u("closedig")},d=(0,t.KR)(""),c=(0,t.KR)(""),k=async()=>{if(""===d.value&&""===c.value)return void y.nk.warning("请输入密码");const e=await r({oldpassword:d.value,newpassword:c.value});console.log(e,"修改了"),1===e.status?y.nk.warning(`${e.msg}`):0===e.status&&(y.nk.success(`${e.message}`),i())},v=()=>{a.commit("user/clearUserInfo")};return(e,l)=>((0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("div",_,[l[8]||(l[8]=(0,s.Lk)("div",{class:"title"},"请仔细阅读后选择",-1)),(0,s.Lk)("div",{class:"offbtn",onClick:i},"×"),l[9]||(l[9]=(0,s.Lk)("div",{class:"ding"},"⊕",-1)),(0,s.Lk)("div",x,["password"===o.type?((0,s.uX)(),(0,s.CE)("div",h,[l[4]||(l[4]=(0,s.Lk)("h3",null,"修改密码",-1)),(0,s.Lk)("div",K,[(0,s.Lk)("div",R,[(0,s.Lk)("label",E,[l[2]||(l[2]=(0,s.eW)(" 旧密码: ")),(0,s.bo)((0,s.Lk)("input",{type:"type",placeholder:"请输入旧密码",name:"oldpassword",required:"required",maxlength:"20","onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e)},null,512),[[n.Jo,d.value]])])]),(0,s.Lk)("div",U,[(0,s.Lk)("label",X,[l[3]||(l[3]=(0,s.eW)(" 新密码: ")),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"请输入新密码",name:"newpassword",required:"required",maxlength:"20","onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e)},null,512),[[n.Jo,c.value]])])]),(0,s.Lk)("button",{class:"certain",onClick:k},"确认修改")])])):"notice"===o.type?((0,s.uX)(),(0,s.CE)("div",A,l[5]||(l[5]=[(0,s.Lk)("h3",null,"系统公告",-1),(0,s.Lk)("div",{class:"notify"},[(0,s.Lk)("p",null,"免责声明"),(0,s.Lk)("p",null,"应用仅供个人学习与技术交流，禁止用于任何非法用途"),(0,s.Lk)("p",null,"还请大佬手下留情，请勿攻击。"),(0,s.Lk)("p",null,[(0,s.eW)("📄 "),(0,s.Lk)("strong",null,"版权声明")]),(0,s.Lk)("p",null,"如内容涉及侵权，请通过以下方式联系作者移除："),(0,s.Lk)("p",null,"📧 邮箱：2652283611@qq.com"),(0,s.Lk)("p",null,"收到有效通知后，将在48小时内处理。")],-1)]))):"logout"===o.type?((0,s.uX)(),(0,s.CE)("div",V,[l[7]||(l[7]=(0,s.Lk)("h3",null,"确认退出",-1)),(0,s.Lk)("div",{class:"gooutbox"},[l[6]||(l[6]=(0,s.Lk)("p",null,"请确认是否退出登入？",-1)),(0,s.Lk)("div",{class:"changebtn"},[(0,s.Lk)("button",{class:"certain",onClick:i},"取消"),(0,s.Lk)("button",{class:"certain",onClick:v},"确定")])])])):(0,s.Q3)("",!0)])])]))}};const F=(0,f.A)(Q,[["__scopeId","data-v-0b3ddfae"]]);var I=F,J=a(4268),W=a(4310);const $={class:"infomain"},j={class:"infocon"},B={class:"smallbox"},D={key:0,class:"setinfo"},O={key:0,class:"setbgimg"};var P={__name:"userinfo",setup(e){const l=(0,J.rd)(),a=(0,t.KR)(""),i=(0,t.KR)(),d=async()=>{const e=await(0,o.$)(),{user_pic:l,...s}=e.data;a.value=s};(0,s.sV)((()=>{d()}));const r=(0,t.KR)(!1),c=(0,t.KR)({}),k=()=>{m.value=!1,r.value=!0;const{username:e,...l}=a.value;c.value=l},v=()=>{r.value=!1,d()},p=()=>{i.value?.showAlert("暂未开放",500)},m=(0,t.KR)(!1),L=(0,t.KR)(""),b=(0,t.KR)(null),f=async e=>{r.value=!1,b.value&&(m.value=!1,await new Promise((e=>setTimeout(e,300)))),L.value=e,b.value=e,m.value=!0},q=()=>{m.value=!1,b.value=null},y=()=>{l.back()};return(e,l)=>((0,s.uX)(),(0,s.CE)("div",$,[(0,s.Lk)("div",{class:"top",onClick:y},(0,u.v_)("←")),(0,s.Lk)("div",j,[(0,s.Lk)("div",B,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,"账号："+(0,u.v_)(a.value.username),1),(0,s.Lk)("li",null,"昵称："+(0,u.v_)(a.value.nickname),1),(0,s.Lk)("li",null,"qq："+(0,u.v_)(a.value.qqnum),1),(0,s.Lk)("li",null,"邮箱："+(0,u.v_)(a.value.email),1),(0,s.Lk)("li",null,"性别："+(0,u.v_)(0==a.value.sex?"男":"女"),1),(0,s.Lk)("li",{onClick:p},"切换背景"),(0,s.Lk)("li",{onClick:k},"修改个人信息"),(0,s.Lk)("li",{onClick:l[0]||(l[0]=e=>f("password"))},"修改密码"),(0,s.Lk)("li",{onClick:l[1]||(l[1]=e=>f("notice"))},"公告"),(0,s.Lk)("li",{onClick:l[2]||(l[2]=e=>f("logout"))},"退出登录")])])]),(0,s.bF)(n.eB,{name:"slide-fade"},{default:(0,s.k6)((()=>[r.value?((0,s.uX)(),(0,s.CE)("div",D,[(0,s.bF)(g,{onClosebtn:v,userlist:c.value},null,8,["userlist"])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(n.eB,{name:"slide-fade"},{default:(0,s.k6)((()=>[m.value?((0,s.uX)(),(0,s.CE)("div",O,[(0,s.bF)(I,{onClosedig:q,type:L.value},null,8,["type"])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(W.A,{ref_key:"alertstitle",ref:i},null,512)]))}};const S=(0,f.A)(P,[["__scopeId","data-v-ab6e4660"]]);var T=S}}]);
//# sourceMappingURL=889.46d4b7c2.js.map